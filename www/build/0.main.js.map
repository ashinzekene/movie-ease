{"version":3,"sources":["../../src/pages/home/home.module.ts","../../src/pages/home/home.ts","../../node_modules/rxjs/add/operator/toPromise.js","../../node_modules/rxjs/operator/toPromise.js"],"names":[],"mappings":"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,GAAG,CAAC,QAAQ,CAAC;YACrB,IAAI,CAAC,IAAI,GAAG,GAAG;QACjB,CAAC;IACH,CAAC;IACH,WAAC;AAAD,CAAC;AAlEqB;IAAnB,wFAAS,CAAC,8DAAO,CAAC;8BAAU,8DAAO;qCAAC;AAD1B,IAAI;IALhB,uFAAS,EAAE;IACX,wFAAS,CAAC;QACT,QAAQ,EAAE,WAAW;OACG;KACzB,CAAC;SASuI;AA2DxI;SAnEY,IAAI,mB;;;;;;;;ACbjB;AACA;AACA;AACA;AACA,qC;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,WAAW;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,kBAAkB,EAAE,kBAAkB,oBAAoB,EAAE,eAAe,uBAAuB,EAAE;AAC1I,KAAK;AACL;AACA;AACA,qC","file":"0.main.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { Home } from './home';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    Home,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(Home),\r\n  ],\r\n  exports: [\r\n    Home\r\n  ]\r\n})\r\nexport class HomeModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { IonicPage, ToastController,  NavController, Content } from 'ionic-angular';\nimport { MoviesStorage } from '../../providers/storage/movies-storage'\nimport { MoviesApi } from \"../../providers/api/movies-api\";\nimport 'rxjs/add/operator/toPromise'\n\ndeclare var window;\n\n@IonicPage()\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html'\n})\nexport class Home {\n  @ViewChild(Content) content: Content;\n  public contentWidth;\n  private _pageNo: number = 2;\n  private size = 342;\n  items = [];\n  public upcomingMovies= [];\n  cannotLoadContent: boolean = true;\n  constructor(private toastCtrl: ToastController, private navCtrl: NavController, private store: MoviesStorage, private movies: MoviesApi) {\n    if(!navigator.onLine) {\n      console.log(\"You are offline\")\n      this.getOffline()\n    } else {\n      console.log(\"You are online\")\n      this.movies.latest().subscribe(res => {\n        console.log(res)\n        this.upcomingMovies = res.results\n      }, err => {\n        this.getOffline()\n      })\n    }\n  }\n  goToDetailsPage(movie) {\n    this.navCtrl.push('MovieDetails', {id: movie.id, data: movie, imgSize: this.size})\n  }\n  getOffline() {\n    this.showToast(\"You are currently offline, serving you cached content\")\n    this.store.getLatest().then(res => {\n      this.upcomingMovies = res.results\n    })\n  }\n  showToast(msg) {\n    let toast = this.toastCtrl.create({\n      message: msg,\n      duration: 5000,\n      position: \"bottom\"\n    })\n    toast.present()\n  }\n  doInfinite(e) {\n    console.log('Begin async operation');\n    return this.movies.latest(this._pageNo).toPromise().then(res => {\n      this.upcomingMovies = this.upcomingMovies.concat(res.results)\n      this._pageNo++\n      console.log('Async operation ended'); \n      e.complete()\n    }).catch(err => {\n      if(this.cannotLoadContent) {\n        this.cannotLoadContent = false\n        this.showToast(\"I can't load anymore content, you are probably offline\")\n      }\n    })\n  }\n  search() {\n    this.navCtrl.push(\"Search\")\n  }\n  doRefresh(refresher) {\n    //this.ionViewDidLoad()\n  }\n  ionViewDidLoad() {\n    // this.slides.slideTo(this.slideIndex || 0)\n    let width = this.content.getContentDimensions().contentWidth;\n    if ( width >= 530) {\n      console.log(\"Tablet\")\n      this.size = 500\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts","\"use strict\";\nvar Observable_1 = require('../../Observable');\nvar toPromise_1 = require('../../operator/toPromise');\nObservable_1.Observable.prototype.toPromise = toPromise_1.toPromise;\n//# sourceMappingURL=toPromise.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/rxjs/add/operator/toPromise.js\n// module id = 300\n// module chunks = 0","\"use strict\";\nvar root_1 = require('../util/root');\n/* tslint:disable:max-line-length */\n/**\n * Converts an Observable sequence to a ES2015 compliant promise.\n *\n * @example\n * // Using normal ES2015\n * let source = Rx.Observable\n *   .just(42)\n *   .toPromise();\n *\n * source.then((value) => console.log('Value: %s', value));\n * // => Value: 42\n *\n * // Rejected Promise\n * // Using normal ES2015\n * let source = Rx.Observable\n *   .throw(new Error('woops'))\n *   .toPromise();\n *\n * source\n *   .then((value) => console.log('Value: %s', value))\n *   .catch((err) => console.log('Error: %s', err));\n * // => Error: Error: woops\n *\n * // Setting via the config\n * Rx.config.Promise = RSVP.Promise;\n *\n * let source = Rx.Observable\n *   .of(42)\n *   .toPromise();\n *\n * source.then((value) => console.log('Value: %s', value));\n * // => Value: 42\n *\n * // Setting via the method\n * let source = Rx.Observable\n *   .just(42)\n *   .toPromise(RSVP.Promise);\n *\n * source.then((value) => console.log('Value: %s', value));\n * // => Value: 42\n *\n * @param PromiseCtor promise The constructor of the promise. If not provided,\n * it will look for a constructor first in Rx.config.Promise then fall back to\n * the native Promise constructor if available.\n * @return {Promise<T>} An ES2015 compatible promise with the last value from\n * the observable sequence.\n * @method toPromise\n * @owner Observable\n */\nfunction toPromise(PromiseCtor) {\n    var _this = this;\n    if (!PromiseCtor) {\n        if (root_1.root.Rx && root_1.root.Rx.config && root_1.root.Rx.config.Promise) {\n            PromiseCtor = root_1.root.Rx.config.Promise;\n        }\n        else if (root_1.root.Promise) {\n            PromiseCtor = root_1.root.Promise;\n        }\n    }\n    if (!PromiseCtor) {\n        throw new Error('no Promise impl found');\n    }\n    return new PromiseCtor(function (resolve, reject) {\n        var value;\n        _this.subscribe(function (x) { return value = x; }, function (err) { return reject(err); }, function () { return resolve(value); });\n    });\n}\nexports.toPromise = toPromise;\n//# sourceMappingURL=toPromise.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/rxjs/operator/toPromise.js\n// module id = 301\n// module chunks = 0"],"sourceRoot":""}