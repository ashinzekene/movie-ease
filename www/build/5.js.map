{"version":3,"sources":["../../src/pages/home/home.module.ts","../../node_modules/rxjs/add/operator/toPromise.js","../../src/pages/home/home.ts"],"names":[],"mappings":"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","file":"5.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { Home } from './home';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    Home,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(Home),\r\n  ],\r\n  exports: [\r\n    Home\r\n  ]\r\n})\r\nexport class HomeModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","// HACK: does nothing, because `toPromise` now lives on the `Observable` itself.\n// leaving this module here to prevent breakage.\n//# sourceMappingURL=toPromise.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/rxjs/add/operator/toPromise.js\n// module id = 301\n// module chunks = 1 3 5 6","import { Component, ViewChild } from '@angular/core';\nimport { IonicPage, ToastController,  NavController, Content } from 'ionic-angular';\nimport { MoviesStorage } from '../../providers/storage/movies-storage'\nimport { MoviesApi } from \"../../providers/api/movies-api\";\nimport 'rxjs/add/operator/toPromise'\n\ndeclare var window;\n\n@IonicPage()\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html'\n})\nexport class Home {\n  @ViewChild(Content) content: Content;\n  public contentWidth;\n  private _pageNo: number = 2;\n  private size = 342;\n  items = [];\n  public upcomingMovies= [];\n  cannotLoadContent: boolean = true;\n  constructor(private toastCtrl: ToastController, private navCtrl: NavController, private store: MoviesStorage, private movies: MoviesApi) {\n    this.movies.latest().subscribe(res => {\n      console.log(res)\n      this.store.setLatest(res)\n      this.upcomingMovies = res.results\n    }, err => {\n      this.getOffline()\n    })\n  }\n  goToDetailsPage(movie) {\n    this.navCtrl.push(\"MovieDetails\", {id: movie.id, data: movie, imgSize: this.size})\n  }\n  getOffline() {\n    this.store.getLatest().then(res => {\n      if (!res.results[0]) {\n        this.presentToast(\"You are offline and there's nothing in the cache. Guess we'd just have to be looking at ourselves\")\n      } else {\n        this.presentToast(\"You are currently offline, serving you cached content\")\n        this.upcomingMovies = res.results\n      }\n    })\n  }\n  presentToast(msg) {\n    let toast = this.toastCtrl.create({\n      message: msg,\n      duration: 5000,\n      position: \"bottom\"\n    })\n    toast.present()\n  }\n  doInfinite(e) {\n    console.log('Begin async operation');\n    return this.movies.latest(this._pageNo).toPromise().then(res => {\n      this.upcomingMovies = this.upcomingMovies.concat(res.results)\n      this._pageNo++\n      console.log('Async operation ended'); \n      e.complete()\n    }).catch(err => {\n      this.presentToast(\"Can't fetch you more movies. There seems to be something wrong with the network ðŸ˜¥ðŸ“µ\")\n    })\n  }\n  search() {\n    this.navCtrl.push(\"Search\")\n  }\n\n  ionViewDidLoad() {\n    // this.slides.slideTo(this.slideIndex || 0)\n    let width = this.content.getContentDimensions().contentWidth;\n    if ( width >= 530) {\n      console.log(\"Tablet\")\n      this.size = 500\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts"],"sourceRoot":""}